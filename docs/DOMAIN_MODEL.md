# Доменная модель ixe-app

## Сущность: `Problem`

### Описание
`Problem` — это основная доменная сущность, представляющая собой *одно* задание ЕГЭ (или другого экзамена), полученное в результате скрэйпинга и обработки.

### Атрибуты
*   `problem_id: str`: Уникальный идентификатор задачи (например, `math_4FF344`).
*   `subject_name: str`: Название предмета (например, `Математика. Базовый уровень`).
*   `text: str`: Основной текст задания.
*   `source_url: str`: URL, откуда было получено задание.
*   `shared_context_html: Optional[str]`: (Новое) HTML-содержимое общего контекста, если задание принадлежит группе (например, общий текст для заданий 1-27 по русскому).
*   `difficulty_level: Optional[str]`: Уровень сложности (`basic`, `advanced`).
*   `task_number: Optional[int]`: Номер задания (1-19).
*   `exam_part: Optional[str]`: Часть экзамена (`Part 1`, `Part 2`).
*   `answer: Optional[str]`: Правильный ответ (если известен).
*   `images: List[str]`: Список локальных путей к изображениям.
*   `files: List[str]`: Список локальных путей к файлам.
*   `kes_codes: List[str]`: Коды КЭС (кодификатор элементов содержания).
*   `topics: List[str]`: Темы, извлечённые из КЭС.
*   `kos_codes: List[str]`: Коды КОС (кодификатор требований).
*   `form_id: Optional[str]`: ID формы для отправки ответа (если применимо).
*   `fipi_proj_id: Optional[str]`: ID проекта на ФИПИ.
*   `created_at: datetime`: Время создания.
*   `updated_at: Optional[datetime]`: Время обновления.

### Поведение
*   `is_answer_correct(user_answer: str) -> bool`: Проверяет, совпадает ли пользовательский ответ с правильным.
*   `can_be_attempted() -> bool`: Проверяет, можно ли попытаться решить задачу (например, не пустой ли текст).
*   `has_images() -> bool`: Есть ли у задачи изображения.
*   `has_files() -> bool`: Есть ли у задачи файлы.
*   `is_suitable_for_level(required_level: str) -> bool`: Подходит ли задача для требуемого уровня сложности.

### Валидация
*   `Problem.__post_init__` проверяет инварианты (например, `text` не может быть пустым, `task_number` в допустимом диапазоне).

