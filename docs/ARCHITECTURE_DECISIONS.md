# Архитектурные решения (ADR)

## 1. Использование DDD, SOLID, TDD

**Состояние:** Принято

**Контекст:** Требовалась гибкая, тестируемая и поддерживаемая архитектура для сложного проекта скрэйпинга и обработки данных.

**Решение:** Применить принципы Domain-Driven Design, SOLID и Test-Driven Development.

**Последствия:** Более сложная начальная структура, но высокая гибкость и надёжность в долгосрочной перспективе.

## 2. Инверсия зависимостей (DIP)

**Состояние:** Принято

**Контекст:** Необходимость изолировать доменные сущности от инфраструктуры.

**Решение:** Ввести интерфейсы (абстракции) для внешних зависимостей (репозитории, браузеры, загрузчики ассетов).

**Последствия:** Улучшена тестируемость, уменьшена связанность между компонентами.

## 3. Группировка заданий с общим контекстом

**Состояние:** Принято

**Контекст:** Страницы ФИПИ содержат `qblock`-и без ID, являющиеся общим текстом для нескольких последующих заданий.

**Решение:** При скрэйпинге идентифицировать общий контекст и сохранять индивидуальные задания с ссылкой (`shared_context_id`) или содержимым (`shared_context_html`) на него.

**Последствия:** Корректное отображение в PWA, возможность отправки ответов в оригинальные формы.
